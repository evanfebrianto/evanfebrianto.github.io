<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Basic Lane Line Detection | Evan Febrianto</title> <meta name="author" content="Evan Febrianto"/> <meta name="description" content="Python, OpenCV"/> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"/> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"/> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="none" id="highlight_theme_light"/> <link rel="shortcut icon" href="/assets/img/avatar.png"/> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://evanfebrianto.github.io/projects/sdc-basic-lane-lines-detection/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"/> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="https://evanfebrianto.github.io/"><span class="font-weight-bold">Evan</span> Febrianto</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/assets/pdf/resume.pdf">Resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Basic Lane Line Detection</h1> <p class="post-description">Python, OpenCV</p> <p class="post-github"> <a href="https://github.com/evanfebrianto/FindingLaneLines" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> <span-github-link> View on GitHub </span-github-link> </a> </p> </header> <article> <p>OpenCV library functions such as canny edge detection and Hough lines transformation are utilized in this program to detect lane lines. In addition, we can remove extraneous information from the image by using the region of interest.</p> <h4 id="pipeline"><strong>Pipeline</strong></h4> <p>My pipeline included five steps. Here are the specifics:</p> <ul> <li>Image conversion from three color areas to grayscale</li> <li>Using Gaussian Blur with a kernel size of 5.</li> <li>Using a 1:3 threshold ratio for canny edge detection</li> <li>Defining vertices for masking the region of interest</li> <li>Using the Hough line transformation inside the region of interest</li> </ul> <p>After connecting all of the pipelines, I was able to detect the lane lines inside the region of interest. The purpose of this project, however, is to draw a single line on the left and right lanes.</p> <p>I designed the draw lines() function to extrapolate the lines in order to draw a single line on the left and right lanes. I divided the lanes into left and right based on their slopes. Then I divided them into two groups for which the linear regression equation will be constructed by running np.polyfit ()</p> <p>The graphic below depicts the distribution of slopes in a single image. The right lane will have a positive slope beginning at 0.5, while the left lane will have a negative slope beginning at -0.5. As a result, any values in the middle will be ignored.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0" align="center"> <figure> <picture> <img src="/assets/img/basic_lane_lines/slopes_distribution.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Slopes Distribution" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Slope distribution on the video input </div> <p>After draw lines() returns the desired output, I rerun the pipelines on the input image, and the outcome is shown below.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0" align="center"> <figure> <picture> <img src="/assets/img/basic_lane_lines/solidWhiteCurve.jpg" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="Output Example" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Output Example </div> <p>If I combine all of the input photographs, it will appear like this.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0" align="center"> <figure> <picture> <img src="/assets/img/basic_lane_lines/all_images.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="All Output" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> All Output Images </div> <p>After applying the pipelines to the video input, I was able to achieve satisfactory results on the video with white color line detection and the video with yellow and white color lines.</p> <div class="row"> <div class="col-sm-6 mt-3 mt-md-0"> <a href="https://youtu.be/zbxr5MJNSU8" title="White lines detection result" target="_blank" rel="noopener noreferrer"> <img src="../../../assets/img/basic_lane_lines/out_white.png" alt="White lines detection result" class="img-fluid rounded z-depth-1"> </a> </div> <div class="col-sm-6 mt-3 mt-md-0"> <a href="https://youtu.be/vj48U4v-hig" title="Yellow lines detection result" target="_blank" rel="noopener noreferrer"> <img src="../../../assets/img/basic_lane_lines/out_yellow.png" alt="Yellow lines detection result" class="img-fluid rounded z-depth-1"> </a> </div> </div> <div class="caption"> Detecting white lines is flawless in the left video. There are white and yellow lines on both sides in the right clip, which is the result of detection. </div> <h4 id="potential-shortcomings-with-the-current-pipeline"><strong>Potential Shortcomings with the Current Pipeline</strong></h4> <p>Because my extrapolated formula uses a linear regression, it could have a flaw if the lane was not straight.</p> <p>An additional drawback could be negated if the slope range is from -0.5 to +0.5. Because the slope values in each video clip can vary, using a hardcoded cutoff doesn’t seem like the ideal solution.</p> <p>Adding to the problem, if the video includes a color change on the road or a shadow obscuring the lines, the algorithm will be thrown off. This is demonstrated in the video below.</p> <div class="col-sm mt-3 mt-md-0"> <a href="https://youtu.be/VJY4PSqq33M" title="Detection result on lines with shadow" target="_blank" rel="noopener noreferrer"> <img src="../../../assets/img/basic_lane_lines/out_challenge.png" alt="Detection result on lines with shadow" class="img-fluid rounded z-depth-1"> </a> </div> <div class="caption"> When the constraints aren't met, the algorithm struggles. </div> <h4 id="possible-improvements-to-the-current-pipeline"><strong>Possible Improvements to the Current Pipeline</strong></h4> <p>Using a curve fitting lane instead of linear regression would be an improvement. An alternative to employing a hardcoded slope range threshold would be to use a filtering technique to remove some noise from within the region of interest. Color space research may be necessary to improve the algorithm’s resilience in dealing with the road color changing problem.</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2022 Evan Febrianto. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> </body> </html>